splunkObservability:
  logsEnabled: false
  profilingEnabled: true
  infrastructureMonitoringEventsEnabled: true
certmanager:
  enabled: true
operator:
  enabled: true
  instrumentation:
    spec:
      java:
        repository: ghcr.io/signalfx/splunk-otel-java/splunk-otel-java
        tag: 2.5.0
      # env:
      #   - name: OTEL_RESOURCE_ATTRIBUTES
      #     value: "deployment.environment=dev"
agent:
  config:
    receivers:
      hostmetrics/process:
        scrapers:
          process:
            metrics:
              process.cpu.time:
                enabled: true
              process.cpu.utilization:
                enabled: true
              process.disk.io:
                enabled: true
              process.memory.usage:
                enabled: true
              process.memory.virtual:
                enabled: true
              process.context_switches:
                enabled: true
              process.disk.operations:
                enabled: true
              process.memory.utilization:
                enabled: true
              process.threads:
                enabled: true
      kubeletstats:
        insecure_skip_verify: true
        auth_type: serviceAccount
        endpoint: ${K8S_NODE_IP}:10250
        metric_groups:
          - container
          - pod
          - node
          - volume
        k8s_api_config:
          auth_type: serviceAccount
        extra_metadata_labels:
          - container.id
          - k8s.volume.type
    exporters:
      signalfx:
        access_token: ${SPLUNK_OBSERVABILITY_ACCESS_TOKEN}
        api_url: "https://api.eu0.signalfx.com"
        ingest_url: "https://ingest.eu0.signalfx.com"
        sync_host_metadata: true
        correlation:
        send_otlp_histograms: true
    processors:
      resource/envname:
        attributes:
          - action: insert
            key: deployment.environment
            value: {{environment}}
    service:
      pipelines:
        metrics:
          receivers:
            - hostmetrics
            - hostmetrics/process
            - kubeletstats
            - receiver_creator
      traces:
        processors:
          - memory_limiter
          - k8sattributes
          - batch
          - resourcedetection
          - resource
          - resource/envname
    extensions:
      zpages:
        endpoint: 0.0.0.0:55679
