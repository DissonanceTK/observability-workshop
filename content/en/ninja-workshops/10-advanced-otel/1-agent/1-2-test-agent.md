---
title: 1.2 Test Agent Configuration
linkTitle: 1.2 Test Agent Configuration
weight: 2
---

You’re ready to start the OpenTelemetry Collector with the newly created `agent.yaml`. This exercise sets the foundation for understanding how data flows through the OpenTelemetry Collector.

{{% notice title="Exercise" style="green" icon="running" %}}

**In your Agent terminal window**:

1. Change into the `[WORKSHOP]/1-agent` folder
2. Run the following command:

```sh { title="Start Collector" }
../otelcol --config=agent.yaml
```

In this workshop, we use **macOS/Linux** commands by default. If you’re using Windows, adjust the commands as needed i.e. use `../otelcol.exe`.

> [!note]
> On Windows, a dialog box may appear asking if you want to grant public and private network access to `otelcol.exe`. Click **"Allow"** to proceed.

**Verify debug output**: If everything is configured correctly, the first and last lines of the output will look like:

```text
2025/01/13T12:43:51 settings.go:478: Set config to [agent.yaml]
<snip to the end>
2025-01-13T12:43:51.747+0100 info service@v0.117.0/service.go:261 Everything is ready. Begin running and processing data.
```

**Send Test Spans**: Instead of instrumenting an application, we’ll simulate sending trace data to the OpenTelemetry Collector using the `loadgen` binary. The JSON-formatted spans generated by `loadgen` mimic those produced by an instrumentation library, allowing us to test the Collector’s processing logic.

This approach enables testing of how the OpenTelemetry Collector processes and exports spans as part of a trace—without the need for actual application instrumentation.

To send spans to the agent, run the following command:

{{% tabs %}}
{{% tab title="Start Load Generator" %}}

```sh
../loadgen
```

{{% /tab %}}
{{% tab title="Response" %}}

```text
Sending traces every 5 seconds. Use Ctrl-C to stop.
Response: {"partialSuccess":{}}

Base trace sent with traceId: 1932f078af8ceea53e2beaaa3b84966d and spanId: 43b1d9c1b0bacf41
 ```

{{% /tab %}}
{{% /tabs %}}

`{"partialSuccess":{}}`: Indicates 100% success, as the field is empty. In case of a partial failure, this field will include details about any failed parts.

**Verify Debug Output**:

1. Find the **Agent** terminal window and check the collector's debug output.
2. Below, we are showing the first and last lines of the debug log for a span. To get the full context, use the **Complete Debug Output** button to review.

```text
2025-03-01T12:24:53.606Z  info  Traces  {"kind": "exporter", "data_type": "traces", "name": "debug", "resource spans": 1, "spans": 1}
2025-03-01T12:24:53.606Z  info  ResourceSpans #0
<snip>
     -> user.mastercard: Str(5555 5555 5555 4444)
        {"kind": "exporter", "data_type": "traces", "name": "debug"}
```

{{% expand title="{{% badge style=primary icon=scroll %}}Complete Debug Output{{% /badge %}}" %}}

```text
2025-03-01T12:24:53.606Z  info  Traces  {"kind": "exporter", "data_type": "traces", "name": "debug", "resource spans": 1, "spans": 1}
2025-03-01T12:24:53.606Z  info  ResourceSpans #0
Resource SchemaURL:
Resource attributes:
     -> service.name: Str(cinema-service)
     -> deployment.environment: Str(production)
ScopeSpans #0
ScopeSpans SchemaURL:
InstrumentationScope cinema.library 1.0.0
InstrumentationScope attributes:
     -> fintest.scope.attribute: Str(Starwars, LOTR)
Span #0
    Trace ID       : 91e910bfd72148a3319af2a360da3eba
    Parent ID      :
    ID             : fa3d9a34d953dee6
    Name           : /movie-validator
    Kind           : Server
    Start time     : 2025-03-01 12:24:53.60227 +0000 UTC
    End time       : 2025-03-01 12:24:54.60227 +0000 UTC
    Status code    : Ok
    Status message : Success
Attributes:
     -> user.name: Str(George Lucas)
     -> user.phone_number: Str(+1555-867-5309)
     -> user.email: Str(george@deathstar.email)
     -> user.account_password: Str(LOTR>StarWars1-2-3)
     -> user.visa: Str(4111 1111 1111 1111)
     -> user.amex: Str(3782 822463 10005)
     -> user.mastercard: Str(5555 5555 5555 4444)
        {"kind": "exporter", "data_type": "traces", "name": "debug"}
```

{{% /expand %}}

{{% /notice %}}
