extensions:
  health_check:                   # Enables the health check extension
    endpoint: 0.0.0.0:13133

receivers:
  otlp:
    protocols:                    # list of Protocols used 
      http:                       # This wil enable the HTTP Protocol
        endpoint: "0.0.0.0:4318"  # Endpoint for incoming telemetry data
  hostmetrics:                    # Receiver Type
    collection_interval: 3600s    # Scrape metrics every hour
    scrapers:                     # Array of hostmetric scrapers
      cpu:                        # Scraper for cpu metrics

exporters:
  debug:                          # Exporter Type
    # Exporter outputs detailed Debug info of every telemetry record
    verbosity: detailed
  file:                           # Exporter Type
    path: "./agent.out"           # Path where data will be saved in OTLP json format
    append: false                 # Overwrite the file each time

processors:
  memory_limiter:                 # Limits memory usage of the OpenTelemetry Collector
    check_interval: 2s            # Interval to check memory usage
    limit_mib: 512                # Memory limit in MiB
  # Processor Type
  resourcedetection:
    # Array of resource detectors (e.g., system, cloud providers)
    detectors: [system]
    # Overwrites existing attributes in the data
    override: true
  resource/add_mode:              # Processor Type/Name
    attributes:                   # Array of attributes and modifications
    - action: insert              # Action is to insert a key
      key: otelcol.service.mode   # Key name
      value: "agent"              # Key value

service:
  pipelines:
    traces:
      receivers: [otlp]
      processors:                 # Alternative syntax option [memory_limiter]
      - memory_limiter
      - resourcedetection
      - resource/add_mode
      exporters: [debug, file]
    metrics:
      receivers: [otlp, hostmetrics]
      processors:
      - memory_limiter
      - resourcedetection
      - resource/add_mode
      exporters: [debug, file]
    logs: 
      receivers: [otlp]
      processors:
      - memory_limiter
      - resourcedetection
      - resource/add_mode
      exporters: [debug, file]
