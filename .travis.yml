language: python
os: linux
dist: xenial
if: tag IS present
cache: pip
env:
  global:
  - secure: Q3wFcuUAqcWYnS6YrWCNXBVFt9wCvKXvE2YDcJPs9xM0HOvNL81Vj4q7s0nWFIJEjXgd3IMOxmqISK1Qp6hTdU9ET7RysGQuWQW+CfEi6SO2CMim0HVmbdAouSBD0/b6u1B3UeAoV/VhhD0CpbZYLBcOc3x8IEiLl4HgeRAfe7aH1ZSWhlVeijSPdEE6Zh/ykgIywiyuBnElYRBwFUjU+7h/B+YGG7923AaQ+drywITRtwYmiUKbFhx1IeGSBeDJPGVpTT2lkUJr46fBGGEhcxQVSNuneoHSY6MbarY5ktPwR4zowUSsI1A7PNND4EjujpntPRpqA8gpIbQ4ZWixFoWPMTkJfaxkj/mkGwC/ZYMSoitySaCtbzY2p9m/4btz6v30u5OilZQO752JUqYICXZEL9Z0eztew7HdXa6oSiGtjh1qqhMsWmTCOP6jUhRVHR3ZZl12pRtRt53Si81vEs2c9ai+HP/0vLwjd0JaJRFEgWYlk4FOvo9NJcApmGI0GFjPjox1xD/JDswn1w4uVWbELd3jYZePBZlR3fzIFSOEfITkqKen77ZzsWqlyyJMvGKfr/Y7wDPkE9NbxVEOEqQZf7WUo8fYaKsOI7LV8obMkifUPaORGwiMogfYUcxgCEcLsB4OVTM0uL12Nc45xKy0ZW+yj3EcyuaIDXjO2qg=
  - secure: fBUiY9OvdWUcqUAMI0Q48Ac4JBfJJ73dJCdnTytDaqHyzTfafkQC1SolZNTkLce5oodrL+gfGUXGLhIGlAtvLofZG3xuIwzXrAE7YOjfK1FQbU27s5p7rk+CGQpG1/cpm3QXw7q5z4UGYGlGbWB//ZuDmmCPxyFs1RW+OMv0NLMUrrmKzp7b+X2y6giVblV1ehnJNJ0l4FXRpJOTjFBIGTNpdVy9ns526WjF3HSjn5kZSk+qs6qXjIH0p5JVdUJeO09197wFuHMOdsHjUg6BXWELlzn+bCgPoOwJKGCK08itPTVoRaL93Bjuf4xdNdXoigX5hqE/beF+qz1YSEMmJw3aVkgGTDyWG2JHJnTS/wAZfTAFxQ9/qB8EHfaVrgaw5DgrMkDAPh46U+TDWSbrJgn/i8h1Flil47UdOz3hprP5+CR7gVyKEDSXC6JmdUGo3OgU3bTS9WUs/+kpPTRpx05WzzJkPv+gOHfB7FR/iiwzpR8uCR8Tsxc611Aw2KG9vOBQjy/+PI865y36yhrxu8MF2BzPenqjs5BIIwXwLN1APKWVXIDKSitODcneI+a64JJeuxoy501eNvCrwytoDnUjleTNikl7QkiYINQ39auVHWvuOxJefMWY+7/PoN87GnG68GaJDIRjpWDnQgdqAikB4DW+K5gVUljh3L8eIqE=
install:
- pip install -r requirements.txt
script:
- git clean -f -d -x
after_success:
- openssl aes-256-cbc -K $encrypted_0a58f67d178a_key -iv $encrypted_0a58f67d178a_iv
  -in o11y-workshop-deploy-key.enc -out o11y-workshop-deploy-key -d
- eval $(ssh-agent -s)
- chmod 600 o11y-workshop-deploy-key
- ssh-add ./o11y-workshop-deploy-key
- "./.ci/release.sh  || travis_terminate 1"
deploy:
  provider: script
  skip_cleanup: true
  script: "./.ci/deploy.sh"
  on:
    repo: signalfx/observability-workshop
    tags: true
  token:
    secure: qQCR0qBSlH5ncHV7uK4Ud7NvQ1Sc5n1jtyzb8EZfAkJILDDphPHmZhhYD2o7vT5FuyrFwNpVC0T2W3rbS5Ukr7234kCVLZFpWycUTTy18Xl3H2yNA/0RTYPirdO5hmAuRT9TDd/pS28eFmjnPn+2eT6R0yTjQlZQiKcSI6UKlchFax/EqzFntSBD6Xw1SFjvmFL79QfcZySfxyDNrWtP6SnE6WKX2o+Q176Q+iW+knRNvWdqCwR7vEVjRZ0OFE3OXTbjH2Co8cPD4a8TBpxvNPQgXaG0UCiwxU2Mhw7NtiVQvM9QFOHjGvWFVbwlE01NCiaxzWUXkssdW+GPGam4gGoMh/Ef5n1nNMcTpS9NcMh5ZLZ2mohIlgOjWzGCEaqj+0Zk14Y7R+oSucaLxs1Ux4Q7kMq+G89aOy8Sd/AwHxaZm3G2/VspZDhBY5CR4KTPaT7Blieezmgb+0Hqb8WYAQbLsOcsWWo+kugqlZ3jJE1ezp9uhqJSQRPelZcBu7nQNuFtZH9ThKtkCoNQQUJcTnaGhQqyRbpwF8xKXmoHRiasa8jho2MQ081lL+zuSLeVh/hor2AKl7O3dyh0Mvt93IqcSfYCK/h3Cey1u0m/j4pwilBmP7zhIPXUd4D73w4NDTHXNmd2xI1Z+VT4o0G5/8z0wH0bvQkyMQ50nSVQxvQ=
